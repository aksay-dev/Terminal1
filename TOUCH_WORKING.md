# ðŸ” ÐžÑ‚Ð»Ð°Ð´ÐºÐ° Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‰ÐµÐ³Ð¾ Ñ‚Ð°Ñ‡ÑÐºÑ€Ð¸Ð½Ð°

## âœ… ÐšÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ Ñ‚ÐµÐ¿ÐµÑ€ÑŒ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ðµ!

Ð˜Ð· Ð»Ð¾Ð³Ð¾Ð² Ð²Ð¸Ð´Ð½Ð¾ Ñ‡Ñ‚Ð¾ ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ Ð² Ð½Ð¾Ñ€Ð¼Ðµ:
```
I (xxx) GT911: Raw: [...] -> x=169, y=244 âœ“
I (xxx) GT911: Raw: [...] -> x=128, y=189 âœ“
I (xxx) GT911: Raw: [...] -> x=254, y=179 âœ“
```

## ðŸŽ¯ Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð° Ð¿Ð¾Ð»Ð½Ð°Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ°

### 1. Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ ÐºÐ½Ð¾Ð¿ÐºÐ¸

ÐŸÑ€Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ ÑƒÐ²Ð¸Ð´Ð¸Ñ‚Ðµ:
```
I (xxx) HELLO_WORLD: Button position: x=XXX..XXX, y=XXX..XXX (size: 250x70)
I (xxx) HELLO_WORLD: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
I (xxx) HELLO_WORLD: â•‘  Touch button area on screen:        â•‘
I (xxx) HELLO_WORLD: â•‘  X: 115 - 365                        â•‘
I (xxx) HELLO_WORLD: â•‘  Y: 380 - 450                        â•‘
I (xxx) HELLO_WORLD: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

**ÐšÐ½Ð¾Ð¿ÐºÐ° Ð´Ð¾Ð»Ð¶Ð½Ð° Ð±Ñ‹Ñ‚ÑŒ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð½Ð¾:**
- X: 115-365 (Ñ†ÐµÐ½Ñ‚Ñ€ Ð³Ð¾Ñ€Ð¸Ð·Ð¾Ð½Ñ‚Ð°Ð»ÑŒÐ½Ð¾)
- Y: 380-450 (Ð²Ð½Ð¸Ð·Ñƒ ÑÐºÑ€Ð°Ð½Ð°)

### 2. Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÐºÐ°ÑÐ°Ð½Ð¸Ð¹

ÐŸÑ€Ð¸ ÐºÐ°ÑÐ°Ð½Ð¸Ð¸ ÑÐºÑ€Ð°Ð½Ð°:
```
I (xxx) INPUT: Touch PRESSED at x=XXX, y=XXX
I (xxx) INPUT: Touch RELEASED
```

### 3. Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ ÐºÐ½Ð¾Ð¿ÐºÐ¸

ÐŸÑ€Ð¸ ÐºÐ°ÑÐ°Ð½Ð¸Ð¸ ÐºÐ½Ð¾Ð¿ÐºÐ¸:
```
I (xxx) HELLO_WORLD: Button event: 6  (PRESSED)
I (xxx) HELLO_WORLD: Button event: 8  (RELEASED)
I (xxx) HELLO_WORLD: Button event: 7  (CLICKED)
I (xxx) HELLO_WORLD: âœ“ Button CLICKED! Total clicks: 1
```

## ðŸš€ ÐŸÐµÑ€ÐµÑÐ¾Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¾Ð¹

```bash
idf.py build flash monitor
```

## ðŸŽ¯ ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑˆÐ°Ð³ Ð·Ð° ÑˆÐ°Ð³Ð¾Ð¼

### Ð¨Ð°Ð³ 1: ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸ÑŽ ÐºÐ½Ð¾Ð¿ÐºÐ¸

ÐŸÐ¾ÑÐ»Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð½Ð°Ð¹Ð´Ð¸Ñ‚Ðµ Ð² Ð»Ð¾Ð³Ð°Ñ…:
```
â•‘  X: XXX - XXX  â† Ð—Ð°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ ÑÑ‚Ð¸ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ!
â•‘  Y: XXX - XXX  â†
```

### Ð¨Ð°Ð³ 2: ÐšÐ¾ÑÐ½Ð¸Ñ‚ÐµÑÑŒ Ñ†ÐµÐ½Ñ‚Ñ€Ð° ÐºÐ½Ð¾Ð¿ÐºÐ¸

ÐŸÐ¾ÑÑ‡Ð¸Ñ‚Ð°Ð¹Ñ‚Ðµ Ñ†ÐµÐ½Ñ‚Ñ€:
- Ð¦ÐµÐ½Ñ‚Ñ€ X = (X1 + X2) / 2
- Ð¦ÐµÐ½Ñ‚Ñ€ Y = (Y1 + Y2) / 2

ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, ÐµÑÐ»Ð¸ X: 115-365, Y: 380-450:
- Ð¦ÐµÐ½Ñ‚Ñ€ X = 240
- Ð¦ÐµÐ½Ñ‚Ñ€ Y = 415

### Ð¨Ð°Ð³ 3: Ð¡Ð¼Ð¾Ñ‚Ñ€Ð¸Ñ‚Ðµ Ð»Ð¾Ð³Ð¸

**ÐŸÑ€Ð¸ ÐºÐ°ÑÐ°Ð½Ð¸Ð¸ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ ÑƒÐ²Ð¸Ð´ÐµÑ‚ÑŒ:**
```
I (xxx) GT911: Raw: [...] -> x=240, y=415  â† ÐšÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ Ñ‚Ð°Ñ‡Ð°
I (xxx) INPUT: Touch PRESSED at x=240, y=415  â† ÐŸÐµÑ€ÐµÐ´Ð°Ð½Ð¾ Ð² LVGL
I (xxx) HELLO_WORLD: Button event: 6  â† LVGL Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð» ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ðµ
I (xxx) HELLO_WORLD: Button event: 7  â† CLICKED!
I (xxx) HELLO_WORLD: âœ“ Button CLICKED! Total clicks: 1  â† ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº ÑÑ€Ð°Ð±Ð¾Ñ‚Ð°Ð»!
```

## âš ï¸ Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð° 1: ÐšÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ ÐºÐ°ÑÐ°Ð½Ð¸Ñ Ð½Ðµ Ð¿Ð¾Ð¿Ð°Ð´Ð°ÑŽÑ‚ Ð² Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ ÐºÐ½Ð¾Ð¿ÐºÐ¸

**Ð¡Ð¸Ð¼Ð¿Ñ‚Ð¾Ð¼:**
```
I (xxx) INPUT: Touch PRESSED at x=100, y=100
Button X: 115-365, Y: 380-450  â† ÐšÐ°ÑÐ°Ð½Ð¸Ðµ Ð½Ðµ Ð² Ð¾Ð±Ð»Ð°ÑÑ‚Ð¸!
```

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:** ÐšÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ Ð½ÑƒÐ¶Ð½Ð¾ Ð¸Ð½Ð²ÐµÑ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸Ð»Ð¸ Ð¿Ð¾Ð¼ÐµÐ½ÑÑ‚ÑŒ Ð¼ÐµÑÑ‚Ð°Ð¼Ð¸.

**Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð² `touch.c`:**
```c
/* ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ñ€Ð°Ð·Ð½Ñ‹Ðµ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ñ‹: */

// Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 1: Ð˜Ð½Ð²ÐµÑ€ÑÐ¸Ñ X
touch_last_x = TOUCH_MAX_X - x_raw;
touch_last_y = y_raw;

// Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 2: Ð˜Ð½Ð²ÐµÑ€ÑÐ¸Ñ Y
touch_last_x = x_raw;
touch_last_y = TOUCH_MAX_Y - y_raw;

// Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 3: Ð˜Ð½Ð²ÐµÑ€ÑÐ¸Ñ Ð¾Ð±Ð¾Ð¸Ñ…
touch_last_x = TOUCH_MAX_X - x_raw;
touch_last_y = TOUCH_MAX_Y - y_raw;

// Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 4: Ð‘ÐµÐ· swap (ÐµÑÐ»Ð¸ Module Switch Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½)
x_raw = coord1;  // Ð’Ð¼ÐµÑÑ‚Ð¾ coord2
y_raw = coord2;  // Ð’Ð¼ÐµÑÑ‚Ð¾ coord1
```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð° 2: Touch PRESSED Ð½Ðµ Ð¿Ð¾ÑÐ²Ð»ÑÐµÑ‚ÑÑ

**Ð¡Ð¸Ð¼Ð¿Ñ‚Ð¾Ð¼:** Ð’ Ð»Ð¾Ð³Ð°Ñ… Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑÑ‹Ñ€Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ GT911, Ð½Ð¾ Ð½ÐµÑ‚ "Touch PRESSED"

**ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°:** `touch_touched()` Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ false

**ÐžÑ‚Ð»Ð°Ð´ÐºÐ°:** Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð² ÐºÐ¾Ð½ÐµÑ† `touch_touched()` Ð¿ÐµÑ€ÐµÐ´ `return true`:
```c
ESP_LOGI(TAG, "touch_touched() returning TRUE");
```

Ð˜ Ð¿ÐµÑ€ÐµÐ´ ÐºÐ°Ð¶Ð´Ñ‹Ð¼ `return false`:
```c
ESP_LOGI(TAG, "touch_touched() returning FALSE: reason XXX");
```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð° 3: Touch PRESSED ÐµÑÑ‚ÑŒ, Ð½Ð¾ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ ÐºÐ½Ð¾Ð¿ÐºÐ¸ Ð½ÐµÑ‚

**Ð¡Ð¸Ð¼Ð¿Ñ‚Ð¾Ð¼:**
```
I (xxx) INPUT: Touch PRESSED at x=240, y=415
```
ÐÐ¾ Ð½ÐµÑ‚ "Button event"

**ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°:** LVGL Ð½Ðµ Ð¿ÐµÑ€ÐµÐ´Ð°ÐµÑ‚ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ Ð½Ð° ÐºÐ½Ð¾Ð¿ÐºÑƒ

**ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°:** ÐšÐ°ÑÐ°Ð½Ð¸Ðµ Ð¿Ð¾Ð¿Ð°Ð´Ð°ÐµÑ‚ Ð² Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ ÐºÐ½Ð¾Ð¿ÐºÐ¸?
```
Touch: x=240, y=415
Button: X: 115-365, Y: 380-450
240 >= 115 && 240 <= 365 ? âœ“
415 >= 380 && 415 <= 450 ? âœ“
```

Ð•ÑÐ»Ð¸ ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ Ð² Ð¾Ð±Ð»Ð°ÑÑ‚Ð¸, Ð½Ð¾ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ Ð½ÐµÑ‚ - Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ ÐºÐ½Ð¾Ð¿ÐºÐ° Ð·Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð°.

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:** Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ñ‡Ñ‚Ð¾ ÐºÐ½Ð¾Ð¿ÐºÐ° Ð½Ðµ disabled:
```c
lv_obj_add_flag(btn, LV_OBJ_FLAG_CLICKABLE);
lv_obj_clear_state(btn, LV_STATE_DISABLED);
```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð° 4: Button event ÐµÑÑ‚ÑŒ, Ð½Ð¾ CLICKED Ð½ÐµÑ‚

**Ð¡Ð¸Ð¼Ð¿Ñ‚Ð¾Ð¼:**
```
I (xxx) HELLO_WORLD: Button event: 6  (PRESSED)
I (xxx) HELLO_WORLD: Button event: 8  (RELEASED)
```
ÐÐ¾ Ð½ÐµÑ‚ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ 7 (CLICKED)

**ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°:** CLICKED Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ PRESSED Ð¸ RELEASED Ð½Ð° Ð¾Ð´Ð½Ð¾Ð¼ Ð¾Ð±ÑŠÐµÐºÑ‚Ðµ

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:** Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ð°Ð»ÐµÑ† Ð´Ð²Ð¸Ð³Ð°ÐµÑ‚ÑÑ Ð²Ð¾ Ð²Ñ€ÐµÐ¼Ñ ÐºÐ°ÑÐ°Ð½Ð¸Ñ. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ:
1. ÐšÐ°ÑÐ°Ñ‚ÑŒÑÑ Ð±Ñ‹ÑÑ‚Ñ€Ð¾
2. ÐÐµ Ð´Ð²Ð¸Ð³Ð°Ñ‚ÑŒ Ð¿Ð°Ð»ÑŒÑ†ÐµÐ¼
3. Ð˜Ð»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ LV_EVENT_PRESSED Ð²Ð¼ÐµÑÑ‚Ð¾ LV_EVENT_CLICKED

## ðŸ“Š ÐšÐ¾Ð´Ñ‹ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ LVGL

```
6  = LV_EVENT_PRESSED
7  = LV_EVENT_CLICKED
8  = LV_EVENT_RELEASED
9  = LV_EVENT_LONG_PRESSED
```

## ðŸŽ¯ Ð‘Ñ‹ÑÑ‚Ñ€Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ€Ð°Ð±Ð¾Ñ‚Ð¾ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚Ð¸

```bash
# ÐŸÐ¾ÑÐ»Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸:
1. ÐÐ°Ð¹Ð´Ð¸Ñ‚Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸ÑŽ ÐºÐ½Ð¾Ð¿ÐºÐ¸ Ð² Ð»Ð¾Ð³Ð°Ñ…
2. ÐšÐ¾ÑÐ½Ð¸Ñ‚ÐµÑÑŒ Ñ†ÐµÐ½Ñ‚Ñ€Ð° Ð¾Ð±Ð»Ð°ÑÑ‚Ð¸
3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿Ð¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ:
   GT911: Raw â†’ INPUT: Touch PRESSED â†’ Button event: 6,7,8 â†’ CLICKED!
```

## âœ… ÐšÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒÐ½Ñ‹Ð¹ ÑÐ¿Ð¸ÑÐ¾Ðº

- [ ] GT911 Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½ (Product ID: 911)
- [ ] Resolution: 480 x 480
- [ ] Module Switch ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚ÐµÐ½
- [ ] ÐšÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ ÐºÐ°ÑÐ°Ð½Ð¸Ñ 0-480
- [ ] Touch PRESSED Ð»Ð¾Ð³Ð¸Ñ€ÑƒÐµÑ‚ÑÑ
- [ ] Touch RELEASED Ð»Ð¾Ð³Ð¸Ñ€ÑƒÐµÑ‚ÑÑ
- [ ] ÐšÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ Ð¿Ð¾Ð¿Ð°Ð´Ð°ÑŽÑ‚ Ð² Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ ÐºÐ½Ð¾Ð¿ÐºÐ¸
- [ ] Button event Ð»Ð¾Ð³Ð¸Ñ€ÑƒÐµÑ‚ÑÑ
- [ ] CLICKED Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ÑÑ
- [ ] Ð¡Ñ‡ÐµÑ‚Ñ‡Ð¸Ðº ÑƒÐ²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÑ‚ÑÑ

---

**ÐŸÐµÑ€ÐµÑÐ¾Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¸ Ð¿Ñ€Ð¸ÑˆÐ»Ð¸Ñ‚Ðµ Ð¿Ð¾Ð»Ð½Ñ‹Ðµ Ð»Ð¾Ð³Ð¸ Ð¾Ñ‚ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð´Ð¾ ÐºÐ°ÑÐ°Ð½Ð¸Ñ ÐºÐ½Ð¾Ð¿ÐºÐ¸!**

